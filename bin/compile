#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir> <env-dir>

set -o errexit    # always exit on error
set -o pipefail   # don't ignore exit codes when piping output

BUILD_DIR=${1:-}
CACHE_DIR=${2:-}
ENV_DIR=${3:-}

echo -n "Cloning parity..."
git clone https://github.com/paritytech/parity $BUILD_DIR/parity
echo "done"

echo "Cargo version: `cargo --version`"

echo -n "Building parity..."
cd $BUILD_DIR/parity
cargo build --release
echo "done"

exit 0
